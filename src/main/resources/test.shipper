
input {
    //println "input 层"

    StdInput {
        println "请输入任意内容,以回车结束"
        codec {
            name 'SimpleCodec'
            format "yyyy-MM-dd HH:mm"
        }
        delimiter "\n"
    }
}

filter {
    if(it['message']=="end")
        throw new Exception("stop")
//    println "filter 层"
    SplitFilter {
        field "message"
        if (it['message']=='h,i')
            terminator ','
        else
            terminator '@'
    }
}


output {
//    println "output 层"
    if (it['message']=='hi')
        println "hi output"
    StdOutput {
        codec 'JsonCodec'
    }
    StdOutput {
        if (it['message']=='hi')
            println "hi pi"
        codec 'JsonCodec'
    }
}
