input {
    //println "input 层"
    StdInput {
        codec 'SimpleCodec'
        delimiter "\n"
    }
}

filter {

//    println "filter 层"
    SplitFilter2 {
        field "message"
        if (it['message']=='h,i')
            terminator ','
        else
            terminator '@'
    }
}


output {
//    println "output 层"
    if (it['message']=='hi')
        println "hi output"
    StdOutput {
        codec 'JsonCodec'
    }
    StdOutput {
        if (it['message']=='hi')
            println "hi pi"
        codec 'JsonCodec'
    }
}
